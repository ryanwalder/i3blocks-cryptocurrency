#!/usr/bin/env python3

import requests
import json
import sys

coin = sys.argv[1].upper()
fiat = sys.argv[2].upper()

lookup = {
    "GBP": "£",
    "EUR": "€",
    "USD": "$",
    "BTC": "",
    "LTC": "Ł",
    "ETH": "Ξ",
}

url = 'https://min-api.cryptocompare.com/data/pricemultifull?fsyms={}&tsyms={}'.format(coin, fiat)

r = requests.get(url)
j = r.json()

price = j['RAW'][coin][fiat]['PRICE']
change = round(j['RAW'][coin][fiat]['CHANGE24HOUR'], 2)
change_pct = round(j['RAW'][coin][fiat]['CHANGEPCT24HOUR'], 2)

if change > 0:
    change = '{}{}'.format(lookup[fiat], change)
else:
    change = str(change)
    change = '-{}{}'.format(lookup[fiat], change[1:])

print('{} {}{} {} {}%'.format(lookup[coin], lookup[fiat], round(price, 2), change, change_pct))
